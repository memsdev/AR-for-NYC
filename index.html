<!DOCTYPE html>
<html>
  
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <script src="https://github.com/imaya/zlib.js"></script>
  <link rel="stylesheet" href="styles.css">
  
    
  <script>
    sessionStorage.clear();
    sessionStorage.clickcount = 0;

    

    function navigate() {
      window.location.replace("https://nyc.memnfts.com")

    }

    function forwards() 
    {
      if (typeof(Storage) !== "undefined") {
          if (sessionStorage.clickcount) {
            if(sessionStorage.clickcount == 5)
            {
              sessionStorage.clickcount = 1;
            }
            else
            {
              sessionStorage.clickcount = Number(sessionStorage.clickcount)+1;
            }
          } else {
            sessionStorage.clickcount = Number(sessionStorage.clickcount)+1
        }}
        
        //back to front
        if(sessionStorage.clickcount == 5) {
          var nextButton = document.querySelector("img");
            nextButton.setAttribute("src", "https://memsworld.b-cdn.net/NYC/AR/general/next.png")

          //var nextButton = document.querySelector("#dynamic-model-1");

          //var currentDynamicModel = document.querySelector("#dynamic-model-" + String(sessionStorage.clickcount));
          var currentDynamicText = document.querySelector('#dynamic-text-' + String(sessionStorage.clickcount));
          //var nextDynamicModel = document.querySelector("#dynamic-model-1");
          var nextDynamicText = document.querySelector('#dynamic-text-1');
        

          //console.log("make " + String(sessionStorage.clickcount) + " invisible" );
          //console.log("make " + String(1) + " VISIBLE" );

          //currentDynamicModel.setAttribute("visible", false)
          currentDynamicText.setAttribute("visible", false)

          //nextDynamicModel.setAttribute("visible", true)
          nextDynamicText.setAttribute("visible", true)
        }
        else {
          if(sessionStorage.clickcount == 4) {     
            var nextButton = document.querySelector("img");
            nextButton.setAttribute("src", "https://memsworld.b-cdn.net/NYC/AR/general/startOver.png")
          }
          //var currentDynamicModel = document.querySelector("#dynamic-model-" + String(sessionStorage.clickcount));
          var currentDynamicText = document.querySelector('#dynamic-text-' + String(sessionStorage.clickcount));
          //var nextDynamicModel = document.querySelector("#dynamic-model-" + String(parseInt(sessionStorage.clickcount) + 1));
          var nextDynamicText = document.querySelector('#dynamic-text-' + String(parseInt(sessionStorage.clickcount) + 1));
        

          //console.log("make " + String(sessionStorage.clickcount) + " invisible" );
          //console.log("make " + String(parseInt(sessionStorage.clickcount) + 1) + " VISIBLE" );

          //currentDynamicModel.setAttribute("visible", false)
          currentDynamicText.setAttribute("visible", false)

          //nextDynamicModel.setAttribute("visible", true)
          nextDynamicText.setAttribute("visible", true)
        }
      }

    window.onload = function(){


      document.querySelector("#tourGuide").addEventListener("markerFound", (e)=>{
       document.querySelector('img').style.display = "block"
        document.querySelector('img').style.visibility = "visible"
      })

      document.querySelector("#tourGuide").addEventListener("markerLost", (e)=>{
        document.querySelector('img').style.display = "none"
      })
    
      
          
          
};



  
  </script>
 
  
  <body style="margin : 0px; overflow: hidden;">
    
    <a-scene embedded arjs="detectionMode: mono_and_matrix; matrixCodeType: 3x3;"  renderer="precision: low" markerhandler> 
      <a-marker type="barcode" value="0" emitevents="true" id="tourGuide">
        <a-entity scale="1.5 1.5 1.5" rotation="0 0 0" position="0 0 0">

          <a-image src="https://memsworld.b-cdn.net/NYC/AR/floor_1-01.png" position="0 0 0" scale="1.5 1.5 1.5" rotation="90 0 0"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/mem.png" rotation="-15 0 0" position=".1 .7 .2" scale="1.5 1.5 1.5"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/clouds_1-01.png" rotation="-15 0 0" position="0 2.3 -.3" scale="2 2 2"></a-image>
          <a-image id="dynamic-text-1" src="https://memsworld.b-cdn.net/NYC/AR/greeting1.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true" visible="true"></a-image>
          <a-image id="dynamic-text-2" src="https://memsworld.b-cdn.net/NYC/AR/greeing2.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true"visible="false"></a-image>
          <a-image id="dynamic-text-3" src="https://memsworld.b-cdn.net/NYC/AR/greeting3.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true" visible="false"></a-image>
          <a-image id="dynamic-text-4" src="https://memsworld.b-cdn.net/NYC/AR/greeting4.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true" visible="false"></a-image>
          <a-image id="dynamic-text-5" src="https://memsworld.b-cdn.net/NYC/AR/greeting5.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true" visible="false"></a-image> 

        </a-entity> 
      </a-marker>

      <a-marker type="barcode" value="1" emitevents="true" id="animated-marker" markerhandler>
        <a-entity scale="2 2 2" rotation="0 0 0" position="0 0 0">

          <a-image src="https://memsworld.b-cdn.net/NYC/AR/floor_1-01.png" position="0 0 0" scale="1.5 1.5 1.5" rotation="90 0 0"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/vrmem.png" rotation="-15 0 0" position=".1 .7 .2" scale="1.5 1.5 1.5"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/makeamemText.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/makeamemHeader.png" rotation="-15 0 0" position="0 2.3 -.3" scale="2 2 2"></a-image>
            
        </a-entity> 
      </a-marker>

      <a-marker type="barcode" value="2" emitevents="true" id="animated-marker" markerhandler>
        <a-entity scale="2 2 2" rotation="0 0 0" position="0 0 0">

          <a-image src="https://memsworld.b-cdn.net/NYC/AR/floor_1-01.png" position="0 0 0" scale="1.5 1.5 1.5" rotation="90 0 0"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/wala.png" rotation="-15 0 0" position=".1 .7 .2" scale="1.5 1.5 1.5"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/postcardsText.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/postcardsHeader-01.png" rotation="-15 0 0" position="0 2.3 -.3" scale="2 2 2"></a-image>
            
        </a-entity> 
      </a-marker>

      <a-marker type="barcode" value="3" emitevents="true" id="animated-marker" markerhandler>
        <a-entity scale="2 2 2" rotation="0 0 0" position="0 0 0">

          <a-image src="https://memsworld.b-cdn.net/NYC/AR/floor_1-01.png" position="0 0 0" scale="1.5 1.5 1.5" rotation="90 0 0"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/bitmem.png" rotation="-15 0 0" position=".1 .7 .2" scale="1.5 1.5 1.5"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/memorytableText.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/newmemorytableHeader-01.png" rotation="-15 0 0" position="0 2.3 -.3" scale="2 2 2"></a-image>
            
        </a-entity> 
      </a-marker>

      <a-marker type="barcode" value="4" emitevents="true" id="animated-marker" markerhandler>
        <a-entity scale="2 2 2" rotation="0 0 0" position="0 0 0">

          <a-image src="https://memsworld.b-cdn.net/NYC/AR/floor_1-01.png" position="0 0 0" scale="1.5 1.5 1.5" rotation="90 0 0"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/worldmem.png" rotation="-15 0 0" position=".1 .7 .2" scale="1.5 1.5 1.5"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/timelinewallText.png" rotation="-15 0 0" position=".5 1.8 .5" visible="true"></a-image>
          <a-image src="https://memsworld.b-cdn.net/NYC/AR/timelinewallHeader-01.png" rotation="-15 0 0" position="0 2.3 -.3" scale="2 2 2"></a-image>
            
        </a-entity> 
      </a-marker>


      <a-entity camera>
     
      </a-entity>
    </a-scene>

    <div style="position:absolute; top:0px; left:0px; z-index:1000;">

      
  </div>

  
   <div class="footerContainer"> 
      <img src="https://memsworld.b-cdn.net/NYC/AR/general/next.png" class="footerButton" id="#next-button" style="visibility: hidden;" onclick="forwards()">
    </div>

  

    <div class="headerContainer"> 
      <img src="https://memsworld.b-cdn.net/NYC/AR/general/header_logo.png" class="headerButton" id="#refresh-button" onclick="navigate()">
    </div>
  </body>
</html>